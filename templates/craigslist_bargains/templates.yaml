dataset: craigslist_bargains
templates:
  145dd841-b971-4550-bc88-305ad3278d58: !Template
    id: 145dd841-b971-4550-bc88-305ad3278d58
    jinja: 'The following conversation is a negotiation on craigslist. The first speaker
      is the buyer, and the second speaker is the seller.


      {{utterance | join("\n\n")}}


      From the seller''s point of view, this deal could be considered

      |||

      {% set nonzero_price = [] %}

      {% for p in dialogue_acts["price"] %}

      {% if p>-1 %}

      {{nonzero_price.append(p) or ""}}

      {% endif %}

      {% endfor %}

      {% set final_price = nonzero_price[-1] %}

      {% if ((final_price - agent_info["Target"][0]) | abs) >= ((final_price - agent_info["Target"][1])
      | abs) %}

      good

      {% endif %}

      {% if ((final_price - agent_info["Target"][0]) | abs) < ((final_price - agent_info["Target"][1])
      | abs) %}

      bad

      {% endif %}'
    name: good deal for seller no list price implicit
    reference: implicit version of "good deal for seller no list price"
    task_template: false
  27010b55-dd5b-4ee9-9e14-a4b809aa6cdb: !Template
    id: 27010b55-dd5b-4ee9-9e14-a4b809aa6cdb
    jinja: 'The following conversation is a negotiation on craigslist. The first speaker
      is the buyer, and the second speaker is the seller.


      {{utterance | join("\n\n")}}


      Was this a good deal for the seller? answer "yes" or "no"

      |||

      {% set nonzero_price = [] %}

      {% for p in dialogue_acts["price"] %}

      {% if p>-1 %}

      {{nonzero_price.append(p) or ""}}

      {% endif %}

      {% endfor %}

      {% set final_price = nonzero_price[-1] %}

      {% if ((final_price - agent_info["Target"][0]) | abs) >= ((final_price - agent_info["Target"][1])
      | abs) %}

      yes

      {% endif %}

      {% if ((final_price - agent_info["Target"][0]) | abs) < ((final_price - agent_info["Target"][1]
      | abs)) %}

      no

      {% endif %}'
    name: good deal for seller no list price
    reference: same as "good deal for seller" prompt, but excludes the list price
    task_template: false
  3e1e2993-2b41-493b-8f27-9a7bb7fa4a0b: !Template
    id: 3e1e2993-2b41-493b-8f27-9a7bb7fa4a0b
    jinja: 'The following conversation is a negotiation on craigslist. The first speaker
      is the buyer, and the second speaker is the seller. The listed price was ${{items["Price"][0]}}0.


      {{utterance | join("\n\n")}}


      How much was the gap between the target of the buyer and the seller?

      |||

      ${{(agent_info[''Target''][0] - agent_info[''Target''][1]) | abs}}0'
    name: gap between parties
    reference: asks model explicitly what the gap was between the buyer's target and
      the seller's target
    task_template: false
  78d1b487-c535-4a0d-ae49-055d321db3fd: !Template
    id: 78d1b487-c535-4a0d-ae49-055d321db3fd
    jinja: 'The following conversation is a negotiation on craigslist. The first speaker
      is the buyer, and the second speaker is the seller. The listed price was ${{items["Price"][0]}}.


      {{utterance | join("\n\n")}}


      Was this a good deal for the seller? Answer "yes" or "no".

      |||

      {% set nonzero_price = [] %}

      {% for p in dialogue_acts["price"] %}

      {% if p>-1 %}

      {{nonzero_price.append(p) or ""}}

      {% endif %}

      {% endfor %}

      {% set final_price = nonzero_price[-1] %}

      {% if ((final_price - agent_info["Target"][0]) | abs) >= ((final_price - agent_info["Target"][1])
      | abs) %}

      yes

      {% endif %}

      {% if ((final_price - agent_info["Target"][0]) | abs) < ((final_price - agent_info["Target"][1])
      | abs) %}

      no

      {% endif %}'
    name: good deal for seller
    reference: asks the model whether the deal was good for the seller or not (it's
      good if the seller's target is closer to the final price than the buyer's, or
      there is a tie)
    task_template: false
  a1dbb258-2e5c-4160-986b-46fc03546965: !Template
    id: a1dbb258-2e5c-4160-986b-46fc03546965
    jinja: 'The following conversation is a negotiation on craigslist. The first speaker
      is the buyer, and the second speaker is the seller. The listed price was ${{items["Price"][0]}}.


      {{utterance | join("\n\n")}}


      Question: Which party got the better deal? Choose from:

      a) the buyer

      b) the seller

      c) neither - it is a fair compromise

      Answer:

      |||

      {% set nonzero_price = [] %}

      {% for p in dialogue_acts["price"] %}

      {% if p>-1 %}

      {{nonzero_price.append(p) or ""}}

      {% endif %}

      {% endfor %}

      {% set final_price = nonzero_price[-1] %}

      {% if ((final_price - agent_info["Target"][0]) | abs) == ((final_price - agent_info["Target"][1])
      | abs) %}

      c) neither - it is a fair compromise

      {% endif %}

      {% if ((final_price - agent_info["Target"][0]) | abs) < ((final_price - agent_info["Target"][1])
      | abs) %}

      a) the buyer

      {% endif %}

      {% if ((final_price - agent_info["Target"][0]) | abs) > ((final_price - agent_info["Target"][1])
      | abs) %}

      b) the seller

      {% endif %}'
    name: best deal
    reference: explicitly asks model which party got the best deal
    task_template: false
  b891bbe7-b3da-4118-b54f-4faa647e36f4: !Template
    id: b891bbe7-b3da-4118-b54f-4faa647e36f4
    jinja: 'The following conversation is a negotiation on craigslist. The first speaker
      is the buyer, and the second speaker is the seller.

      {{utterance[:2] | join("\n\n")}}

      {% if dialogue_acts[''intent''][2]!=''unknown'' and dialogue_acts[''intent''][2]!=""
      %}

      Question:What could be the next line in the negotiation, if the intent is to
      {{dialogue_acts[''intent''][2]}}?

      {% endif %}

      {% if dialogue_acts[''intent''][2]==''unknown'' or dialogue_acts[''intent''][2]==""  %}

      Question:What could be the next line in the negotiation?

      {% endif %}

      Answer:

      |||

      {{utterance[2]}}'
    name: generate intent
    reference: Generates the next line of negotiation given the intent
    task_template: true
